#!/bin/sh

set -e

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

echo "Running pre-commit checks..."

"$SCRIPT_DIR/../../.ci/lint.sh"

echo "Running tests..."
# Use nextest for faster test execution
if ! cargo nextest run --workspace; then
    echo ""
    echo "❌ Tests failed."
    echo "   Run 'cargo nextest run --workspace' to see detailed test output."
    exit 1
fi

echo "✅ All pre-commit checks passed!"
