---
source: crates/tribute-passes/src/native/rtti.rs
expression: output
---
core.module @test {
  func.func @create_struct(%0: core.i32, %1: core.ptr) -> core.ptr {
    ^bb0:
      %2 = adt.struct_new %0, %1 {type = adt.struct() {fields = [[@value, core.i32], [@next, core.ptr]]}} : adt.struct() {fields = [[@value, core.i32], [@next, core.ptr]]}
      func.return %2
  }
  clif.func {sym_name = @__tribute_release_32, type = core.func(core.nil, core.ptr)} {
    ^bb0(%0: core.ptr):
      %1 = clif.load %0 {offset = 8} : core.ptr
      %2 = clif.iconst {value = 0} : core.ptr
      %3 = clif.icmp %1, %2 {cond = @eq} : core.i8
      clif.brif %3 [^bb2, ^bb1]

    ^bb1:
      %4 = clif.load %0 {offset = 8} : core.ptr
      tribute_rt.release %4 {alloc_size = 0}
      clif.jump [^bb2]

    ^bb2:
      %5 = clif.iconst {value = 8} : core.i64
      %6 = clif.isub %0, %5 : core.ptr
      %7 = clif.iconst {value = 24} : core.i64
      %8 = clif.call %6, %7 {callee = @__tribute_dealloc} : core.nil
      clif.return
  }
}
