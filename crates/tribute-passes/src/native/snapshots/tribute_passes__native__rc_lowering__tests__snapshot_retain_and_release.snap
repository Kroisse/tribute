---
source: crates/tribute-passes/src/native/rc_lowering.rs
assertion_line: 1275
expression: ir
---
core.module @test {
  clif.func {sym_name = @retain_then_release, type = core.func(core.nil, core.ptr)} {
  ^bb1(%p: core.ptr):
    %0 = clif.iconst {value = 0} : core.ptr
    %1 = clif.icmp %p, %0 {cond = @eq} : core.i8
    clif.brif %1
  ^bb2:
    %2 = clif.iconst {value = 8} : core.i64
    %3 = clif.isub %p, %2 : core.ptr
    %4 = clif.load %3 {offset = 0} : core.i32
    %5 = clif.iconst {value = 1} : core.i32
    %6 = clif.iadd %4, %5 : core.i32
    clif.store %6, %3 {offset = 0}
    clif.jump
  ^bb3:
    %7 = clif.iconst {value = 0} : core.ptr
    %8 = clif.icmp %p, %7 {cond = @eq} : core.i8
    clif.brif %8
  ^bb4:
    %9 = clif.iconst {value = 8} : core.i64
    %10 = clif.isub %p, %9 : core.ptr
    %11 = clif.load %10 {offset = 0} : core.i32
    %12 = clif.iconst {value = 1} : core.i32
    %13 = clif.isub %11, %12 : core.i32
    clif.store %13, %10 {offset = 0}
    %14 = clif.iconst {value = 0} : core.i32
    %15 = clif.icmp %13, %14 {cond = @eq} : core.i8
    clif.brif %15
  ^bb5:
    %16 = clif.iconst {value = 12} : core.i64
    %17 = clif.call %p, %16 {callee = @__tribute_deep_release} : core.nil
    clif.jump
  ^bb6:
    clif.return
  }
}
